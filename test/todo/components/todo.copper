
<cu-todo>
	<todo-title :count="todo.length"></todo-title>
	<div>
		counter: {{ counter }}
		<input type="button" value="Increment" @click="counter++">
	</div>
	<div>
		<input
			type="text"
			:class="{ 'test-value': counter > 1 }"
			:style="{ 'color': new_todo_title.length >= 10 ? 'red' : null }"
			:value.sync="new_todo_title"
			>
		<input
			type="button"
			value="Add"
			@click="addTodo()"
			>
	</div>
	<cu if="todo.length > 0">
		<todo-list
			:todo="todo"
			:test_value="{ is_counter: counter > 1 }"
			@remove="todo.splice($event, 1)"
			>
		</todo-list>
	</cu>
	<cu else>
		<i>No tasks to do.</i>
	</cu>
</cu-todo>

<script type="module">
	// import * as valibot from 'valibot';
	// import validot_def, { string, string as string2 } from 'valibot';
	import TodoList from '/test/todo/dist/components/todo-list.js';
	import TodoTitle from '/test/todo/dist/components/todo-title.js';

	let counter = 0;
	let new_todo_title = '';
	let todo = [];

	function addTodo(arg) {
		todo.push({
			id: Date.now(),
			title: new_todo_title,
		});

		new_todo_title = '';
	}

	watch(
		() => todo.length,
		(value) => {
			console.log('todo.length', value);
		},
		{
			immediate: true,
		},
	);

	onMounted(() => {
		console.log('cu-todo mounted!');
	});

	onUnmounted(() => {
		console.log('cu-todo unmounted :(');
	});
</script>

<style>
	cu-todo {
		display: block;
		padding: 10px;
		border: 1px solid #ccc;
		border-radius: 5px;
	}
</style>
